# oh-my-zsh configuration
export ZSH="${HOME}/.antigen/bundles/robbyrussell/oh-my-zsh"

# ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"
DISABLE_UNTRACKED_FILES_DIRTY="true"

# Look in ~/.oh-my-zsh/themes/
ZSH_THEME="robbyrussell"

# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
plugins=(bundler osx git common-aliases dirhistory extract autojump zsh-navigation-tools) # web-search) # npm sudo nvm )
# valid: rake ruby emoji fancy-ctrl-z 

test -e "$ZSH/oh-my-zsh.sh" && source "$ZSH/oh-my-zsh.sh"
# oh-my-zsh done.

# history max num
export HISTSIZE=100000
# history max save
export SAVEHIST=100000
# export HISTFILE=~/.histfile
export EDITOR=vim
export VISUAL=vim # for c-x e

### display language
export LANG="en_US.UTF-8"
export LANGUAGE="en_US"
export LC_COLLATE="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LC_MESSAGES="en_US.UTF-8"
export LC_MONETARY="en_US.UTF-8"
export LC_NUMERIC="en_US.UTF-8"
export LC_TIME="en_US.UTF-8"
# export LC_ALL=
# locale -v


if [[ -n $SSH_CONNECTION ]]; then
    # export TERM='screen-256color'
    echo "in ssl connection"
fi

if [[ -n "$ZSH_VERSION" ]]; then
    # zsh plugin manager
    # git clone https://github.com/zsh-users/antigen.git
    export AUTOENV_FILE_ENTER=".env"
    if [[ -s "$HOME/.local/antigen/antigen.zsh" ]]; then
        source $HOME/.local/antigen/antigen.zsh
        # antigen bundle Tarrasch/zsh-autoenv
        # antigen bundle zsh-users/zsh-syntax-highlighting
        antigen bundle robbyrussell/oh-my-zsh plugins/z
        antigen bundle zsh-users/zsh-autosuggestions
        antigen apply
    fi

    # typeset -U PATH
# elif [[ -n "$BASH_VERSION" ]]; then
else

    # For bash
    # preserve ahead word
    bind '"\e[A": history-search-backward'
    bind '"\e[B": history-search-forward'

    # https://superuser.com/questions/212446/binding-backward-kill-word-to-ctrlw
    # stty werase undef
    bind '"\C-w": backward-kill-word'

fi

if [[ -n $TMUX ]]; then
    # support italic with terminfo
    # set -g default-terminal "tmux-256color"
    # export TERM='screen-256color'

    # auto rename tmux window
    tmux_window_name=`tmux display-message -p '#W'`
    # if window name length greate than 9, change name
    [[ -x "$(command -v adjspecies)" ]] && [[ ${#tmux_window_name} -gt 9 ]] && tmux rename-window '-' # `adjspecies --sep .`
fi

test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"

PATH="$HOME/.pyenv/shims:$HOME/.dotfiles/bin:$HOME/.local/bin:$HOME/.bin:$PATH"

unset DOCKER_HOST

. ~/.dotfiles/zshrc/zsh_func
. ~/.dotfiles/zshrc/zsh_aliases
[[ -s "$HOME/.zshrc_local" ]] && . ~/.zshrc_local

# proxyon
