#!/usr/bin/env bash

DIR=$(dirname ~)
HOME=$DIR/$USER

manfile="$HOME/wiki/ $HOME/.dotfiles/README.md"

if [[ $1 == "m" ]]; then # cheat
  if [[ -z $2 ]]; then
    echo "require second word"
    exit;
  fi
  cheat $2
elif [[ $1 == "w" ]]; then # web
      open "https://github.com/yantze/wiki/search?q=$*"
elif [[ $1 == "f" ]]; then # file
  filepath=$(find ~/wiki -type f -name "*$2*.md" | head -n 1)
  if [[ -n $filepath ]]; then
    vim $filepath
  fi
else
  if [[ $1 ]]; then
  #   hash ag 2>/dev/null || {
       # if not installed ag
       # grep -r -n -B 1 -A 2 "$1" $manfile
       # grep --color=auto -rn -B 1 -A 2 "$1" $manfile
       # -h 隐藏文件名
       # -r 递归查找
       # -n 显示行号
  #   }
  # else
    ag -B 1 -A 2 "$1" $manfile
  fi
fi
