#!/usr/bin/env bash
# alias mw='m w'  # search web
# alias mf='m f'  # search file and open it
# alias mm='m m'  # search cheat 

DIR=$(dirname ~)
HOME=$DIR/$USER
WIKIHOME="$HOME/wiki/ $LOCAL_WIKI_LIST" # find with multiple directory

case $1 in
"m")
  if [[ -z $2 ]]; then
    echo "require second word"
    exit;
  fi
  ;;
"w")
  search=${@:2}
  open "https://github.com/yantze/wiki/search?q=$search"
  ;;
"f")
  filepath=$(find $WIKIHOME -type f -name "*$2*.md" | head -n 1)
  if [[ -n $filepath ]]; then
    vim $filepath
  fi
  ;;
*)
  if [[ $1 ]]; then
  #   hash ag 2>/dev/null || {
       # if not installed ag
       # grep -r -n -B 1 -A 2 "$1" $manfile
       # grep --color=auto -rn -B 1 -A 2 "$1" $manfile
       # -h 隐藏文件名
       # -r 递归查找
       # -n 显示行号
  #   }
  # else
    ag -B 1 -A 2 "$1" $manfile
  fi
  ;;
esac
